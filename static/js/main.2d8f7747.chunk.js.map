{"version":3,"sources":["locales/index.ts","model.ts","components/Title/index.tsx","words/index.ts","components/Game/useGame.tsx","utils.ts","components/Cell/index.tsx","components/Row/index.tsx","components/Input/index.tsx","components/Round/index.tsx","components/Game/GameOngoing.tsx","components/Game/images/heart.png","components/Game/images/shield.png","components/Game/GameLost.tsx","components/Game/GameHandler.tsx","components/Game/GameWon.tsx","components/Game/index.tsx","components/App/index.tsx","index.tsx"],"names":["i18n","use","LanguageDetector","initReactI18next","init","resources","en","translation","fr","preload","fallbackLng","lng","interpolation","escapeValue","LetterStatus","Status","Locale","Title","t","useTranslation","className","getWords","locale","a","EN","FR","enWordObj","frWordObj","Error","GameContext","createContext","state","status","Ongoing","difficulty","round","armor","max","value","health","attempts","word","onRoundEnd","onFailedAttempt","GameProvider","props","language","useMemo","languages","useState","setState","useCallback","Math","result","Won","Lost","newMax","computeNextRound","useEffect","cancelled","getRandomWord","Provider","children","useGame","useContext","length","words","array","filter","floor","random","original","ascii","normalize","replace","replaceAt","str","index","replacement","substr","Cell","classnames","Correct","Misplaced","Row","goalWord","attemptWord","showValidity","wordRange","range","letters","split","lettersStatus","goal","attempt","filteredGoal","filteredAttempt","Array","fill","Incorrect","i","indexOf","computeLetterStatus","map","position","letter","Default","Input","onAttempt","inputRef","setValue","onChange","ev","target","toLocaleLowerCase","onKeyDown","key","repeat","padEnd","type","maxLength","ref","onClick","Round","initialAttempts","onEnd","useRef","wordLength","pastAttempts","setPastAttempts","attemptsLeft","setAttemptsLeft","newAttempts","concat","push","roundState","last","current","focus","knownLetters","known","pastAttempt","attemptLetter","RoundRow","GameOngoing","src","alt","GameLost","launchNewGame","GameHandlerContext","i18next","link","getWiktionaryLink","Trans","i18nKey","components","tag","href","rel","GameWon","Game","GameHandler","setKey","toString","App","inGame","setInGame","onLanguageChange","event","changeLanguage","xmlns","width","height","viewBox","d","version","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.2d8f7747.chunk.js","sourcesContent":["import i18n from \"i18next\";\nimport LanguageDetector from \"i18next-browser-languagedetector\";\nimport { initReactI18next } from \"react-i18next\";\nimport en from \"./en.json\";\nimport fr from \"./fr.json\";\n\ni18n\n  .use(LanguageDetector)\n  .use(initReactI18next)\n  .init({\n    resources: {\n      en: { translation: en },\n      fr: { translation: fr },\n    },\n    preload: [\"en\", \"fr\"],\n    fallbackLng: \"en\",\n    lng: \"en\",\n    interpolation: {\n      escapeValue: false,\n    },\n  });\n\nexport default i18n;\n","export enum LetterStatus {\n  Correct,\n  Misplaced,\n  Incorrect,\n  Default,\n}\n\nexport enum Status {\n  Ongoing,\n  Lost,\n  Won,\n}\n\nexport type RoundResult = Status.Lost | Status.Won;\n\nexport interface GameState {\n  status: Status;\n  difficulty: number;\n  round: number;\n  word: Word | null;\n  armor: DefensePart;\n  health: DefensePart;\n  attempts: number;\n}\n\nexport interface DefensePart {\n  max: number;\n  value: number;\n}\n\nexport enum Locale {\n  EN = \"en\",\n  FR = \"fr\",\n}\n\nexport interface Word {\n  original: string;\n  ascii: string;\n}\n","import React from \"react\";\nimport { useTranslation } from \"react-i18next\";\nimport \"./style.css\";\n\nexport default function Title() {\n  const { t } = useTranslation();\n\n  return (\n    <div className=\"Title\">\n      <h1>Idiom</h1>\n      <p>{t(\"TAGLINE\")}</p>\n    </div>\n  );\n}\n","import { Locale } from \"model\";\n\nexport async function getWords(locale: string) {\n  switch (locale) {\n    case Locale.EN:\n      let enWordObj = await import(\"words/en.json\");\n      return enWordObj.en;\n    case Locale.FR:\n      let frWordObj = await import(\"words/fr.json\");\n      return frWordObj.fr;\n    default:\n      throw new Error(\"Unknown locale: \" + locale);\n  }\n}\n","import React, {\n  createContext,\n  useContext,\n  useCallback,\n  useEffect,\n  useState,\n  PropsWithChildren,\n  useMemo,\n} from \"react\";\nimport { GameState, RoundResult, Status } from \"model\";\nimport { getWords } from \"words\";\nimport { useTranslation } from \"react-i18next\";\n\ninterface IGameContext {\n  state: GameState;\n  onRoundEnd: (result: RoundResult) => unknown;\n  onFailedAttempt: () => unknown;\n}\n\nconst GameContext = createContext<IGameContext>({\n  state: {\n    status: Status.Ongoing,\n    difficulty: 0,\n    round: 0,\n    armor: {\n      max: 0,\n      value: 0,\n    },\n    health: {\n      max: 0,\n      value: 0,\n    },\n    attempts: 0,\n    word: null,\n  },\n  onRoundEnd: () => {},\n  onFailedAttempt: () => {},\n});\n\nexport function GameProvider(props: PropsWithChildren<{}>) {\n  const { i18n } = useTranslation();\n  const language = useMemo(() => i18n.languages[0], [i18n.languages]);\n\n  const [state, setState] = useState<GameState>({\n    status: Status.Ongoing,\n    difficulty: 3,\n    round: 0,\n    armor: {\n      max: 5,\n      value: 5,\n    },\n    health: {\n      max: 3,\n      value: 3,\n    },\n    attempts: 0,\n    word: null,\n  });\n\n  const onFailedAttempt = useCallback(() => {\n    setState((state) => ({\n      ...state,\n      armor: {\n        ...state.armor,\n        value: Math.max(0, state.armor.value - 1),\n      },\n      health: {\n        ...state.health,\n        value:\n          state.armor.value > 0\n            ? state.health.value\n            : Math.max(0, state.health.value - 1),\n      },\n    }));\n  }, [setState]);\n\n  const onRoundEnd = useCallback((result: RoundResult) => {\n    setState((state) => computeNextRound(state, result));\n  }, []);\n\n  useEffect(() => {\n    let cancelled = false;\n\n    (async () => {\n      const word = await getRandomWord(state.difficulty, language);\n      if (cancelled) return;\n      setState((state) => ({\n        ...state,\n        word,\n        attempts: state.armor.value + state.health.value,\n      }));\n    })();\n\n    return () => {\n      cancelled = true;\n    };\n  }, [setState, state.difficulty, state.round, language]);\n\n  return (\n    <GameContext.Provider\n      value={{\n        state,\n        onFailedAttempt,\n        onRoundEnd,\n      }}\n      children={props.children}\n    />\n  );\n}\n\nexport function useGame() {\n  return useContext(GameContext);\n}\n\nfunction computeNextRound(state: GameState, result: RoundResult) {\n  if (result !== Status.Won) {\n    return {\n      ...state,\n      status: Status.Lost,\n    };\n  }\n\n  let { status, round, armor, difficulty } = state;\n\n  round++;\n  armor.value = armor.max;\n\n  if (round === 5) {\n    const newMax = state.armor.max + 1;\n    armor.value = newMax;\n    armor.max = newMax;\n    difficulty += 1;\n    round = 1;\n  }\n\n  if (difficulty === 10) {\n    status = Status.Won;\n  }\n\n  return {\n    ...state,\n    word: null,\n    status,\n    round,\n    armor,\n    difficulty,\n  };\n}\n\nasync function getRandomWord(length: number, locale: string) {\n  const words = await getWords(locale);\n  const array = words.filter((word) => word.length === length);\n  const word = array[Math.floor(Math.random() * array.length)];\n\n  return {\n    original: word,\n    ascii: word.normalize(\"NFD\").replace(/[\\u0300-\\u036f]/g, \"\"),\n  };\n}\n","export function replaceAt(str: string, index: number, replacement: string) {\n  return (\n    str.substr(0, index) + replacement + str.substr(index + replacement.length)\n  );\n}\n","import React from \"react\";\nimport classnames from \"classnames\";\nimport { LetterStatus } from \"model\";\nimport \"./style.css\";\n\ninterface CellProps {\n  state: LetterStatus;\n}\n\nexport default function Cell(props: React.PropsWithChildren<CellProps>) {\n  return (\n    <div\n      className={classnames(\"Cell\", {\n        \"Cell--correct\": props.state === LetterStatus.Correct,\n        \"Cell--misplaced\": props.state === LetterStatus.Misplaced,\n      })}\n    >\n      <div>{props.children}</div>\n    </div>\n  );\n}\n","import React, { useMemo } from \"react\";\nimport range from \"lodash/range\";\nimport { LetterStatus } from \"model\";\nimport { replaceAt } from \"utils\";\nimport Cell from \"components/Cell\";\nimport \"./style.css\";\n\nexport interface RowProps {\n  goalWord: string;\n  attemptWord: string;\n  showValidity?: boolean;\n}\n\nexport default function Row(props: RowProps) {\n  const { goalWord, attemptWord, showValidity = true } = props;\n\n  const wordRange = useMemo(() => range(0, goalWord.length), [goalWord]);\n  const letters = useMemo(() => attemptWord.split(\"\"), [attemptWord]);\n  const lettersStatus = useMemo(\n    () => (showValidity ? computeLetterStatus(goalWord, attemptWord) : []),\n    [showValidity, goalWord, attemptWord]\n  );\n\n  return (\n    <div className=\"Row\">\n      {wordRange.map((position) => {\n        const letter = letters[position];\n        return (\n          <div className=\"Row--cell\" key={letter + position}>\n            <Cell\n              state={\n                showValidity ? lettersStatus[position] : LetterStatus.Default\n              }\n            >\n              {letter}\n            </Cell>\n          </div>\n        );\n      })}\n    </div>\n  );\n}\n\nfunction computeLetterStatus(goal: string, attempt: string) {\n  let filteredGoal = goal;\n  let filteredAttempt = attempt;\n  let status: LetterStatus[] = Array(goal.length).fill(LetterStatus.Incorrect);\n\n  // First pass for correct letters\n\n  for (let i = 0; i < goal.length; i++) {\n    if (attempt[i] !== goal[i]) continue;\n    filteredGoal = replaceAt(filteredGoal, i, \"_\");\n    filteredAttempt = replaceAt(filteredAttempt, i, \"_\");\n    status[i] = LetterStatus.Correct;\n  }\n\n  // Second pass for misplaced letters\n\n  for (let i = 0; i < goal.length; i++) {\n    if (filteredAttempt[i] === \"_\") continue;\n    const index = filteredGoal.indexOf(filteredAttempt[i]);\n    if (index === -1) continue;\n    filteredGoal = replaceAt(filteredGoal, index, \"_\");\n    filteredAttempt = replaceAt(filteredAttempt, i, \"_\");\n    status[i] = LetterStatus.Misplaced;\n  }\n\n  return status;\n}\n","import React, { useCallback, useState } from \"react\";\nimport { useTranslation } from \"react-i18next\";\nimport Row from \"components/Row\";\nimport \"./style.css\";\n\ninterface InputProps {\n  length: number;\n  onAttempt: (word: string) => unknown;\n  inputRef: React.RefObject<HTMLInputElement>;\n}\n\nexport default function Input(props: InputProps) {\n  const { length, onAttempt, inputRef } = props;\n\n  const { t } = useTranslation();\n\n  const [value, setValue] = useState(\"\");\n\n  const attempt = useCallback(() => {\n    if (value.length !== length) return;\n\n    onAttempt(value);\n    setValue(\"\");\n  }, [length, onAttempt, value, setValue]);\n\n  const onChange = useCallback((ev: React.ChangeEvent<HTMLInputElement>) => {\n    setValue(ev.target.value.toLocaleLowerCase());\n  }, []);\n\n  const onKeyDown = useCallback(\n    (ev: React.KeyboardEvent) => {\n      if (ev.key === \"Enter\") attempt();\n    },\n    [attempt]\n  );\n\n  return (\n    <div className=\"Input\">\n      <div className=\"Input--wrapper\">\n        <Row\n          goalWord={\"_\".repeat(length)}\n          attemptWord={value.padEnd(length, \" \")}\n          showValidity={false}\n        />\n\n        <input\n          type=\"text\"\n          value={value}\n          onChange={onChange}\n          onKeyDown={onKeyDown}\n          maxLength={length}\n          ref={inputRef}\n        />\n      </div>\n\n      <button onClick={attempt}>{t(\"GAME.BUTTON.ATTEMPT\")}</button>\n    </div>\n  );\n}\n","import React, {\n  useCallback,\n  useEffect,\n  useMemo,\n  useRef,\n  useState,\n} from \"react\";\nimport { useTranslation } from \"react-i18next\";\nimport last from \"lodash/last\";\nimport { RoundResult, Status } from \"model\";\nimport { replaceAt } from \"utils\";\nimport Row, { RowProps } from \"components/Row\";\nimport Input from \"components/Input\";\nimport \"./style.css\";\n\ninterface RoundProps {\n  word: string;\n  initialAttempts: number;\n  onEnd: (result: RoundResult) => unknown;\n  onFailedAttempt: () => unknown;\n}\n\nexport default function Round(props: RoundProps) {\n  const { word, initialAttempts, onEnd, onFailedAttempt } = props;\n\n  const { t } = useTranslation();\n\n  const inputRef = useRef<HTMLInputElement>(null);\n  const wordLength = useMemo(() => word.length, [word]);\n\n  const [pastAttempts, setPastAttempts] = useState<Array<string>>([]);\n  const [attemptsLeft, setAttemptsLeft] = useState<number>(initialAttempts);\n\n  const attempt = useCallback(\n    (value: string) => {\n      if (value.length !== wordLength) return;\n\n      setPastAttempts((attempts) => {\n        const newAttempts = attempts.concat();\n        newAttempts.push(value);\n        return newAttempts;\n      });\n      setAttemptsLeft((attemptsLeft) => attemptsLeft - 1);\n    },\n    [setPastAttempts, wordLength]\n  );\n\n  const roundState = useMemo(() => {\n    if (last(pastAttempts) === word) return Status.Won;\n    if (attemptsLeft > 0) return Status.Ongoing;\n    return Status.Lost;\n  }, [attemptsLeft, pastAttempts, word]);\n\n  useEffect(() => {\n    if (roundState !== Status.Ongoing) onEnd(roundState);\n  }, [roundState, onEnd]);\n\n  useEffect(() => {\n    if (pastAttempts.length && last(pastAttempts) !== word) onFailedAttempt();\n  }, [pastAttempts, word, onFailedAttempt]);\n\n  useEffect(() => {\n    inputRef.current?.focus();\n  }, []);\n\n  const knownLetters: string = useMemo(() => {\n    let known = word[0] + \" \".repeat(word.length - 1);\n\n    for (let pastAttempt of pastAttempts) {\n      for (let position = 1; position < word.length; position++) {\n        const attemptLetter = pastAttempt[position];\n        if (word[position] === attemptLetter)\n          known = replaceAt(known, position, attemptLetter);\n      }\n    }\n\n    return known;\n  }, [word, pastAttempts]);\n\n  return (\n    <div className=\"Round\">\n      {roundState === Status.Ongoing && (\n        <div className=\"Round--input\">\n          <Input length={wordLength} onAttempt={attempt} inputRef={inputRef} />\n        </div>\n      )}\n\n      <div className=\"Round--grid\">\n        {roundState === Status.Ongoing && (\n          <>\n            <h2>{t(\"GAME.INFO.KNOWN\")}</h2>\n\n            <RoundRow\n              key={word + \"known\"}\n              attemptWord={knownLetters}\n              goalWord={word}\n            />\n          </>\n        )}\n\n        {!!pastAttempts.length && (\n          <>\n            <h2>{t(\"GAME.INFO.ATTEMPTS\")}</h2>\n\n            {pastAttempts.map((attempt, position) => (\n              <RoundRow\n                key={word + attempt + position}\n                attemptWord={attempt}\n                goalWord={word}\n              />\n            ))}\n          </>\n        )}\n      </div>\n    </div>\n  );\n}\n\nfunction RoundRow(props: RowProps) {\n  return (\n    <div className=\"Round--row\">\n      <Row {...props} />\n    </div>\n  );\n}\n","import React from \"react\";\nimport { useTranslation } from \"react-i18next\";\nimport Round from \"components/Round\";\nimport { useGame } from \"./useGame\";\nimport heartIcon from \"./images/heart.png\";\nimport shieldIcon from \"./images/shield.png\";\n\nexport default function GameOngoing() {\n  const { t } = useTranslation();\n  const { state, onRoundEnd, onFailedAttempt } = useGame();\n\n  return (\n    <>\n      <div className=\"Game--stats\">\n        <div>\n          <div className=\"Game--valign\">\n            <img src={heartIcon} alt={t(\"GAME.INFO.HEALTH\")} />\n            <div>{t(\"GAME.INFO.HEALTH\")}</div>\n          </div>\n          <div className=\"Game--valign\">\n            <span className=\"Game--stat\">{state.health.value}</span>\n            <span>/ {state.health.max}</span>\n          </div>\n        </div>\n\n        <div>\n          <div className=\"Game--valign\">\n            <img src={shieldIcon} alt={t(\"GAME.INFO.SHIELD\")} />\n            <div>{t(\"GAME.INFO.SHIELD\")}</div>\n          </div>\n          <div className=\"Game--valign\">\n            <span className=\"Game--stat\">{state.armor.value}</span>\n            <span>/ {state.armor.max}</span>\n          </div>\n        </div>\n      </div>\n\n      <div className=\"Game--stats Game--stats-mini\">\n        <div>\n          <div>{t(\"GAME.INFO.DIFFICULTY\")}</div>\n          <div className=\"Game--stat\">{state.difficulty}</div>\n        </div>\n        <div>\n          <div>{t(\"GAME.INFO.ROUND\")}</div>\n          <div className=\"Game--stat\">{state.round + 1}</div>\n        </div>\n      </div>\n\n      {!!state.word ? (\n        <Round\n          key={state.difficulty + \"-\" + state.round}\n          word={state.word.ascii}\n          initialAttempts={state.attempts}\n          onEnd={onRoundEnd}\n          onFailedAttempt={onFailedAttempt}\n        />\n      ) : (\n        <p>{t(\"COMMON.VERB.LOADING\")}</p>\n      )}\n    </>\n  );\n}\n","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAi0lEQVR42mNgGGzgPxomJI6q+W215f9f/4HgqwOYDdMAE/u/wwtZHLvmK3I2YDybzw4sBtKILIbLELjm/1W1EBuBdAqDD1gTTBzZEJwGwDTDNKBjkKFYDYA5FZ9mggbAnIsNwwzGZQBeQ2Dhgk8ziiEghegGEKMZpyGkaMYwhBzNKIaQqxk9D9AOAAABJBz7/dMlXgAAAABJRU5ErkJggg==\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAl0lEQVR42mNgoCL4D8Vkq/v//6vDfzwKwOJvqy3xGwDDSAbBNcIwTgN+/f//36P7yv+K6//BhoD4/3d4gTWJuEwEY4IGgDTDaJBhMI0wNtEGIBsCw0QZAFIIMwDGJ9oAkL9hYYDLAFCYEGUADMM0g9hgAxAxRLwBMBcRMgCnIcRqxjAEORrx+R2nIcgJiRTN6JmGLM1EAwD5HEWLBn3NqQAAAABJRU5ErkJggg==\"","import React, { useMemo } from \"react\";\nimport i18next from \"i18next\";\nimport { Trans, useTranslation } from \"react-i18next\";\nimport { useGameHandler } from \"./GameHandler\";\nimport { useGame } from \"./useGame\";\nimport { Locale } from \"model\";\n\nexport default function GameLost() {\n  const { t } = useTranslation();\n  const { launchNewGame } = useGameHandler();\n  const {\n    state: { word },\n  } = useGame();\n\n  const locale = i18next.languages[0];\n  const link = useMemo(() => getWiktionaryLink(word!.original, locale), [\n    word,\n    locale,\n  ]);\n\n  return (\n    <div className=\"GameLost\">\n      <h2>{t(\"END.LOSS\")}</h2>\n\n      <p>{t(\"END.WORD.PRELUDE\")}</p>\n\n      <div className=\"GameLost--word\">{word!.original}</div>\n\n      <p>\n        <Trans\n          i18nKey=\"END.WORD.DEFINITION\"\n          components={{\n            // eslint-disable-next-line jsx-a11y/anchor-has-content\n            tag: <a href={link} target=\"_blank\" rel=\"noopener noreferrer\" />,\n          }}\n        />\n      </p>\n\n      <button onClick={launchNewGame}>{t(\"RESTART.BUTTON\")}</button>\n    </div>\n  );\n}\n\nfunction getWiktionaryLink(word: string, locale: string) {\n  switch (locale) {\n    case Locale.EN:\n      return `https://en.wiktionary.org/wiki/${word}#English`;\n    case Locale.FR:\n      return `https://fr.wiktionary.org/wiki/${word}#Fran%C3%A7ais`;\n    default:\n      throw new Error(\"Unsupported locale\");\n  }\n}\n","import React, { createContext, useCallback, useContext, useState } from \"react\";\nimport Game from \".\";\nimport { GameProvider } from \"./useGame\";\n\nconst GameHandlerContext = createContext({\n  launchNewGame: () => {},\n});\n\nexport function GameHandler() {\n  const [key, setKey] = useState<number>(1);\n\n  const launchNewGame = useCallback(() => {\n    debugger;\n    setKey((key) => key + 1);\n  }, [setKey]);\n\n  return (\n    <GameHandlerContext.Provider value={{ launchNewGame }}>\n      <GameProvider key={key.toString()}>\n        <Game />\n      </GameProvider>\n    </GameHandlerContext.Provider>\n  );\n}\n\nexport function useGameHandler() {\n  return useContext(GameHandlerContext);\n}\n","import React from \"react\";\nimport { useTranslation } from \"react-i18next\";\n\nexport default function GameWon() {\n  const { t } = useTranslation();\n\n  return <div className=\"GameWon\">{t(\"END.WIN\")}</div>;\n}\n","import React from \"react\";\nimport { Status } from \"model\";\nimport { useGame } from \"./useGame\";\nimport GameOngoing from \"./GameOngoing\";\nimport GameLost from \"./GameLost\";\nimport GameWon from \"./GameWon\";\nimport \"./style.css\";\n\nexport default function Game() {\n  const {\n    state: { status },\n  } = useGame();\n\n  return (\n    <div className=\"Game\">\n      {status === Status.Ongoing ? (\n        <GameOngoing />\n      ) : status === Status.Won ? (\n        <GameWon />\n      ) : (\n        <GameLost />\n      )}\n    </div>\n  );\n}\n","import React, { ChangeEvent, useCallback, useState } from \"react\";\nimport i18next from \"i18next\";\nimport { useTranslation } from \"react-i18next\";\nimport { version } from \"../../../package.json\";\nimport Title from \"components/Title\";\nimport { GameHandler } from \"components/Game/GameHandler\";\nimport \"./style.css\";\n\nexport default function App() {\n  const { t, i18n } = useTranslation();\n  const [inGame, setInGame] = useState(false);\n\n  const onLanguageChange = useCallback(\n    (event: ChangeEvent<HTMLSelectElement>) => {\n      const language = event.target.value;\n      i18n.changeLanguage(language);\n    },\n    [i18n]\n  );\n\n  return (\n    <div className=\"App\">\n      <div className=\"App--title\">\n        <Title />\n      </div>\n\n      {inGame ? (\n        <GameHandler />\n      ) : (\n        <>\n          <button onClick={() => setInGame(true)}>{t(\"START.BUTTON\")}</button>\n\n          <div className=\"App--language\">\n            <span>\n              <svg\n                xmlns=\"http://www.w3.org/2000/svg\"\n                width=\"24\"\n                height=\"24\"\n                viewBox=\"0 0 24 24\"\n              >\n                <path d=\"M0 0h24v24H0z\" fill=\"none\"></path>\n                <path\n                  d=\" M12.87 15.07l-2.54-2.51.03-.03c1.74-1.94 2.98-4.17 3.71-6.53H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7l1.62-4.33L19.12 17h-3.24z \"\n                  fill=\"currentColor\"\n                ></path>\n              </svg>\n            </span>\n            <span>{t(\"START.LANGUAGE\")}</span>\n            <select value={i18next.languages[0]} onChange={onLanguageChange}>\n              <option value=\"en\">English</option>\n              <option value=\"fr\">français</option>\n            </select>\n          </div>\n\n          <div className=\"App--version\">Version {version}</div>\n        </>\n      )}\n    </div>\n  );\n}\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"style\";\nimport \"locales\";\nimport App from \"components/App\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}